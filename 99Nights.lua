local Translations = {
   --["这里填要替换的英文"] = "这里填中文",
    ["Main"] = "主菜单",
    ["Main features"] = "主要功能",
    ["Search"] = "搜索",
    ["Bring"] = "传送玩家",
    ["Spectate Players"] = "观察玩家",
    ["lnstant Prompts"] = "及时提醒",
    ["Walkspeed"] = "移动速度",
    ["Unload UI"] = "卸载界面",
    ["Kids"] = "孩童",
    ["Teleport to Dino Kid"] = "传送到恐龙孩童",
    ["Teleport to Kraken Kid"] = "传送到海怪孩童",
    ["Teleport to Squid Kid"] = "传送到章鱼孩童",
    ["Teleport to Koala Kid"] = "传送到考拉孩童",
    ["Teleport"] = "传送",
    ["Teleport to Fire"] = "传送到火源",
    ["Teleport to Alien Chest"] = "传送到外星宝藏",
    ["Teleport to Stronghold"] = "传送到要塞",
    ["Teleport to Fairy House"] = "传送到精灵屋",
    ["Teleport to Tool Workshop"] = "传送到工具工坊",
    ["Teleport to Snow Clothing Shop"] = "传送到雪地服装店",
    ["Auto"] = "自动功能",
    ["Auto Chop"] = "自动砍伐",
    ["Auto Kill NPCs"] = "自动击杀NPC",
    ["Chop Range"] = "砍伐范围",
    ["Kill Range"] = "击杀范围",
    ["Auto Consume Food"] = "自动吃食物",
    ["Auto Plant Saplings in Circle"] = "自动环形种植树苗",
    ["Starting Radius"] = "初始半径",
    ["Tree Spacing"] = "树木间距",
    ["Bring"] = "物品获取",
    ["Bring ltens"] = "获取物品",
    ["Bring Tools"] = "获取工具",
    ["Works on Level 3 Fire!!"] = "适用于3级火焰",
    ["Good Axe"] = "优质斧头",
    ["lce Axe"] = "冰斧",
    ["Strong Axe"] = "强力斧头",
    ["Chainsaw"] = "电锯",
    ["Old Flashlight"] = "旧手电筒",
    ["Strong Flashlight"] = "强力手电筒",
    ["Morningstar"] = "晨星锤",
    ["Katana"] = "武士刀",
    ["Laser Sword"] = "激光剑",
    ["lce Sword"] = "冰剑",
    ["Revolver"] = "左轮手枪",
    ["Rifle"] = "步枪",
    ["Tactical Shotgun"] = "战术散弹枪",
    ["Snowball"] = "雪球",
    ["Frozen Shuriken"] = "冰冻手里剑",
    ["Bring Sacks"] = "获取麻袋",
    ["Good Sack"] = "优质麻袋",
    ["Giant Sack"] = "巨型麻袋",
    ["Bring Fuel"] = "获取燃料/物资",
    ["Chair"] = "椅子",
    ["Biofuel"] = "生物燃料",
    ["Coal"] = "煤炭",
    ["Fuel Canister"] = "燃料罐",
    ["Oil Barrel"] = "油桶",
    ["Log"] = "原木",
    ["Crossbow"] = "弩",
    ["Cultist"] = "邪教徒",
    ["Wolf Corpse"] = "狼尸",
    ["Alpha Wolf Corpse"] = "阿尔法狼尸",
    ["Bear Corpse"] = "熊尸",
    ["Sapling"] = "树苗",
    ["Ray Gun"] = "射线枪",
    ["Laser Cannon"] = "激光加农炮",
    ["Bring Food"] = "获取食物",
    ["Carrot"] = "胡萝卜",
    ["Corn"] = "玉米",
    ["Pumpkin"] = "南瓜",
    ["Berry"] = "浆果",
    ["Apple"] = "苹果",
    ["Morsel"] = "小块食物",
    ["Steak"] = "牛排",
    ["Rins"] = "肋排",
    ["Cake"] = "蛋糕",
    ["Stew"] = "炖菜",
    ["Hearty Stew"] = "丰盛炖菜",
    ["Meat?"] = "肉？",
    ["Sandwich"] = "三明治",
    ["Bring Armour"] = "获取护甲",
    ["Leather Body"] = "皮革胸甲",
    ["Thorn Body"] = "荆棘胸甲",
    ["lron Body"] = "铁制胸甲",
    ["Riot Shield"] = "防爆盾牌",
    ["Alien Armor"] = "外星护甲",
    ["Bring Seeds"] = "获取种子",
    ["Chili Seeds"] = "辣椒种子",
    ["Flower Seeds"] = "花卉种子",
    ["Berry Seeds"] = "浆果种子",
    ["Firefly Seeds"] = "萤火虫种子",
    ["Bring Healables"] = "获取治疗物品",
    ["Bandage"] = "绷带",
    ["Medkit"] = "医疗包",
    ["Cake"] = "蛋糕",
    ["Broken Radio"] = "破损收音机",
    ["Broken Microwave"] = "破损微波炉",
    ["Tyre"] = "轮胎",
    ["Metal Chair"] = "金属椅子",
    ["Old Car Engine"] = "旧汽车引擎",
    ["Washing Machine"] = "洗衣机",
    ["Cultist Experiment"] = "邪教徒实验体",
    ["Cultist Prototype"] = "邪教徒原型体",
    ["UFO Scrap"] = "不明飞行物残骸",
    ["Bring Pelts"] = "获取兽皮",
    ["Bunny Foot"] = "兔脚",
    ["Wolf Pelt"] = "狼皮",
    ["Alpha Wolf Pelt"] = "阿尔法狼皮",
    ["Bear Palt"] = "熊皮",
    ["Arctic Fox Pelt"] = "北极狐皮",
    ["Polar Bear Pelt"] = "北极熊皮",
    ["Chili"] = "辣椒",
    ["Cooked Morsel"] = "烹饪小块食物",
    ["Cooked Steak"] = "烹饪牛排",
    ["Bring Ammo"] = "获取弹药",
    ["Ammo"] = "弹药",
    ["Rifle Ammo"] = "步枪弹药",
    ["Shoteet Metal"] = "散弹枪弹药",
    ["Bring Scrap"] = "获取废料",
    ["Bolt"] = "螺栓",
    ["Sheet Metal"] = "金属版",
    ["UFO Junk"] = "不明飞行物废料",
    ["UFO Component"] = "不明飞行物组件",
    ["Broken Fan"] = "破损风扇",
    ["Broken Radio"] = "破损收音机",
    ["Broken Microwave"] = "破损微波炉",
    ["Tyre"] = "轮胎",
    ["Toggle"] = "切换",
    ["Lock"] = "锁定",
}

local function translateText(text)
    if not text or type(text) ~= "string" then return text end
    
    if Translations[text] then
        return Translations[text]
    end
    
    for en, cn in pairs(Translations) do
        if text:find(en) then
            return text:gsub(en, cn)
        end
    end
    
    return text
end

local function setupTranslationEngine()
    local success, err = pcall(function()
        local oldIndex = getrawmetatable(game).__newindex
        setreadonly(getrawmetatable(game), false)
        
        getrawmetatable(game).__newindex = newcclosure(function(t, k, v)
            if (t:IsA("TextLabel") or t:IsA("TextButton") or t:IsA("TextBox")) and k == "Text" then
                v = translateText(tostring(v))
            end
            return oldIndex(t, k, v)
        end)
        
        setreadonly(getrawmetatable(game), true)
    end)
    
    if not success then
        warn("元表劫持失败:", err)
       
        local translated = {}
        local function scanAndTranslate()
            for _, gui in ipairs(game:GetService("CoreGui"):GetDescendants()) do
                if (gui:IsA("TextLabel") or gui:IsA("TextButton") or gui:IsA("TextBox")) and not translated[gui] then
                    pcall(function()
                        local text = gui.Text
                        if text and text ~= "" then
                            local translatedText = translateText(text)
                            if translatedText ~= text then
                                gui.Text = translatedText
                                translated[gui] = true
                            end
                        end
                    end)
                end
            end
            
            local player = game:GetService("Players").LocalPlayer
            if player and player:FindFirstChild("PlayerGui") then
                for _, gui in ipairs(player.PlayerGui:GetDescendants()) do
                    if (gui:IsA("TextLabel") or gui:IsA("TextButton") or gui:IsA("TextBox")) and not translated[gui] then
                        pcall(function()
                            local text = gui.Text
                            if text and text ~= "" then
                                local translatedText = translateText(text)
                                if translatedText ~= text then
                                    gui.Text = translatedText
                                    translated[gui] = true
                                end
                            end
                        end)
                    end
                end
            end
        end
        
        local function setupDescendantListener(parent)
            parent.DescendantAdded:Connect(function(descendant)
                if descendant:IsA("TextLabel") or descendant:IsA("TextButton") or descendant:IsA("TextBox") then
                    task.wait(0.1)
                    pcall(function()
                        local text = descendant.Text
                        if text and text ~= "" then
                            local translatedText = translateText(text)
                            if translatedText ~= text then
                                descendant.Text = translatedText
                            end
                        end
                    end)
                end
            end)
        end
        
        pcall(setupDescendantListener, game:GetService("CoreGui"))
        local player = game:GetService("Players").LocalPlayer
        if player and player:FindFirstChild("PlayerGui") then
            pcall(setupDescendantListener, player.PlayerGui)
        end
        
        while true do
            scanAndTranslate()
            task.wait(3)
        end
    end
end

task.wait(2)

setupTranslationEngine()

local success, err = pcall(function()
--这下面填加载外部脚本
loadstring(game:HttpGet("https://raw.githubusercontent.com/Seriously56/99-Nights/refs/heads/main/99%20nights"))()


end)

if not success then
    warn("加载失败:", err)
end
